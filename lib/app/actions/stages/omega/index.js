"use strict";require("core-js/modules/es.object.to-string");require("core-js/modules/es.promise");Object.defineProperty(exports,"__esModule",{value:true});exports.submit=exports.query=exports.store=exports.fetch=exports.change=exports.ZASHIKI_OMEGA_QUERY=exports.ZASHIKI_OMEGA_STORE=exports.ZASHIKI_OMEGA_FETCH=exports.ZASHIKI_OMEGA_CHANGE=exports.ZASHIKI_OMEGA_ERROR=void 0;require("regenerator-runtime/runtime");var _shinkansenPantograph=require("shinkansen-pantograph");var _=require("../..");function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}var _Pantograph$OMEGA=_shinkansenPantograph.Pantograph.OMEGA,ZASHIKI_OMEGA_ERROR=_Pantograph$OMEGA.ERROR,ZASHIKI_OMEGA_CHANGE=_Pantograph$OMEGA.CHANGE,ZASHIKI_OMEGA_FETCH=_Pantograph$OMEGA.FETCH,ZASHIKI_OMEGA_STORE=_Pantograph$OMEGA.STORE,ZASHIKI_OMEGA_QUERY=_Pantograph$OMEGA.QUERY;exports.ZASHIKI_OMEGA_QUERY=ZASHIKI_OMEGA_QUERY;exports.ZASHIKI_OMEGA_STORE=ZASHIKI_OMEGA_STORE;exports.ZASHIKI_OMEGA_FETCH=ZASHIKI_OMEGA_FETCH;exports.ZASHIKI_OMEGA_CHANGE=ZASHIKI_OMEGA_CHANGE;exports.ZASHIKI_OMEGA_ERROR=ZASHIKI_OMEGA_ERROR;function routeError(error){return{type:ZASHIKI_OMEGA_ERROR,error:error};}function changeRoute(route){return{type:ZASHIKI_OMEGA_CHANGE,payload:{promise:_.request.patch('zashiki/stages/change',route)}};}function fetchRoute(){return{type:ZASHIKI_OMEGA_FETCH,payload:{promise:_.request.get('zashiki/stages/fetch')}};}function storeRoute(route){return{type:ZASHIKI_OMEGA_STORE,payload:{promise:_.request.put('zashiki/stages/store',route)}};}function queryRoute(){return{type:ZASHIKI_OMEGA_QUERY,payload:{promise:_.request.get('zashiki/stages/query')}};}var change=function change(resource){return function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(dispatch){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return dispatch(changeRoute({resource:resource}));case 3:_context.next=9;break;case 5:_context.prev=5;_context.t0=_context["catch"](0);_context.next=9;return dispatch(routeError(_context.t0));case 9:case"end":return _context.stop();}}},_callee,null,[[0,5]]);}));return function(_x){return _ref.apply(this,arguments);};}();};exports.change=change;var fetch=function fetch(resource){return function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(dispatch){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return dispatch(fetchRoute({resource:resource}));case 3:_context2.next=9;break;case 5:_context2.prev=5;_context2.t0=_context2["catch"](0);_context2.next=9;return dispatch(routeError(_context2.t0));case 9:case"end":return _context2.stop();}}},_callee2,null,[[0,5]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};exports.fetch=fetch;var store=function store(resource,response){return function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(dispatch){return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return dispatch(storeRoute({resource:resource,response:response}));case 3:_context3.next=9;break;case 5:_context3.prev=5;_context3.t0=_context3["catch"](0);_context3.next=9;return dispatch(routeError(_context3.t0));case 9:case"end":return _context3.stop();}}},_callee3,null,[[0,5]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};exports.store=store;var query=function query(){return function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(dispatch){return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return dispatch(queryRoute());case 3:_context4.next=9;break;case 5:_context4.prev=5;_context4.t0=_context4["catch"](0);_context4.next=9;return dispatch(routeError(_context4.t0));case 9:case"end":return _context4.stop();}}},_callee4,null,[[0,5]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();};exports.query=query;var submit=function submit(resource,response){return function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(dispatch){return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return dispatch(storeRoute({resource:resource,response:response}));case 3:_context5.next=5;return dispatch(queryRoute());case 5:_context5.next=11;break;case 7:_context5.prev=7;_context5.t0=_context5["catch"](0);_context5.next=11;return dispatch(routeError(_context5.t0));case 11:case"end":return _context5.stop();}}},_callee5,null,[[0,7]]);}));return function(_x5){return _ref5.apply(this,arguments);};}();};exports.submit=submit;