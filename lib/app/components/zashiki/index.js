'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=require('babel-runtime/core-js/object/get-prototype-of');var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=require('babel-runtime/helpers/classCallCheck');var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require('babel-runtime/helpers/createClass');var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=require('babel-runtime/helpers/possibleConstructorReturn');var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require('babel-runtime/helpers/inherits');var _inherits3=_interopRequireDefault(_inherits2);var _extends2=require('babel-runtime/helpers/extends');var _extends3=_interopRequireDefault(_extends2);var _react=require('react');var _react2=_interopRequireDefault(_react);var _propTypes=require('prop-types');var _propTypes2=_interopRequireDefault(_propTypes);var _immutable=require('immutable');var _immutable2=_interopRequireDefault(_immutable);var _zashiki=require('../../actions/zashiki');var ZashikiActions=_interopRequireWildcard(_zashiki);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var resource=function resource(alpha,omega){return(0,_extends3.default)({},alpha?(0,_extends3.default)({alpha:alpha},omega?{omega:omega}:{}):{});};var Zashiki=function(_React$Component){(0,_inherits3.default)(Zashiki,_React$Component);function Zashiki(){var _ref;var _temp,_this,_ret;(0,_classCallCheck3.default)(this,Zashiki);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=(0,_possibleConstructorReturn3.default)(this,(_ref=Zashiki.__proto__||(0,_getPrototypeOf2.default)(Zashiki)).call.apply(_ref,[this].concat(args))),_this),_this.state=function(){var _this$props$params=_this.props.params,alpha=_this$props$params.alpha,omega=_this$props$params.omega;return{now:_immutable2.default.Map(resource(alpha,omega))};}(),_temp),(0,_possibleConstructorReturn3.default)(_this,_ret);}/**
   *  Create initial 'state' from initial 'props'
   */(0,_createClass3.default)(Zashiki,[{key:'componentDidMount',/**
   *  Interrogate initial props for current Route 'params' (if the component has mounted, the route has changed)
   */value:function componentDidMount(){// console.log('(Zashiki)componentDidMount()') // eslint-disable-line
var _props=this.props,dispatch=_props.dispatch,_props$params=_props.params,alpha=_props$params.alpha,omega=_props$params.omega;/**
     *  Dispatch and notify the Node App via Axios
     */dispatch(ZashikiActions.changeRoute({resource:resource(alpha,omega)})).catch(function(e){return console.log('componentDidMount',e);});}/**
   *  Interrogate latest 'props' for changes to Route 'params' (the route may have changed, or other props)
   *
   *  @param {Object} props   Latest props
   */},{key:'componentWillReceiveProps',value:function componentWillReceiveProps(props){// console.log('(Zashiki)componentWillReceiveProps()', props) // eslint-disable-line
var dispatch=props.dispatch,_props$params2=props.params,alpha=_props$params2.alpha,omega=_props$params2.omega;/**
     *  Assign state 'now' to const 'was' (it's an Immutable 'Map')
     */var was=this.state.now;/**
     *  Create const 'now' from params 'alpha' and 'omega' (as an Immutable 'Map')
     */var now=_immutable2.default.Map(resource(alpha,omega));if(!_immutable2.default.is(was,now)){/**
       *  Update the state (because 'componentWillReceiveProps()' does not cause a render)
       */this.setState({was:was,now:now});/**
       *  Dispatch and notify the Node App via Axios
       */dispatch(ZashikiActions.changeRoute({resource:resource(alpha,omega)})).catch(function(e){return console.log('componentWillReceiveProps',e);});}}}]);return Zashiki;}(_react2.default.Component);exports.default=Zashiki;Zashiki.propTypes={params:_propTypes2.default.object.isRequired,dispatch:_propTypes2.default.func.isRequired,zashiki:_propTypes2.default.oneOfType([_propTypes2.default.shape({exception:_propTypes2.default.object}),_propTypes2.default.shape({response:_propTypes2.default.object,resource:_propTypes2.default.object,status:_propTypes2.default.number,state:_propTypes2.default.shape({count:_propTypes2.default.number.isRequired,index:_propTypes2.default.number.isRequired}),gears:_propTypes2.default.shape({reverse:_propTypes2.default.object,forward:_propTypes2.default.object}),definition:_propTypes2.default.object})])};