"use strict";var _transmission=require("shinkansen-engine/lib/transformers/transmission");var _checkAnswers=_interopRequireDefault(require("shinkansen-pinion/lib/transformers/check-answers"));var _debark=require("../../../stages/debark");var _=require("../../..");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}jest.mock("../../../../common",function(){return{REJECTED:'MOCK REJECTED'};});jest.mock('shinkansen-engine/lib/transformers/transmission',function(){return{toZashiki:jest.fn().mockReturnValue('MOCK ZASHIKI')};});jest.mock('shinkansen-pinion/lib/transformers/check-answers',function(){return jest.fn().mockReturnValue('MOCK CHECK ANSWERS');});jest.mock("../../..",function(){return{transformRejected:jest.fn()};});describe('@modernpoacher/zashiki-react-redux/app/transformers/stages/debark',function(){describe('`transform`',function(){it('is defined',function(){expect(_debark.transform).toBeDefined();});});describe('`transform()`',function(){describe('With parameters',function(){afterEach(function(){jest.clearAllMocks();});describe('`status` is `REJECTED`',function(){it('invokes `transformRejected`',function(){(0,_debark.transform)({status:'MOCK REJECTED'});expect(_.transformRejected).toBeCalledWith('MOCK REJECTED',{});});});describe('`status` is not `REJECTED`',function(){var returnValue;beforeEach(function(){jest.clearAllMocks();returnValue=(0,_debark.transform)({status:'MOCK STATUS'});});it('does not invoke `transformRejected`',function(){expect(_.transformRejected).not.toBeCalled();});it('returns an object',function(){expect(returnValue).toEqual({status:'MOCK STATUS',definition:{},definitions:[],token:{}});});describe('`omega` is an array',function(){var returnValue;beforeEach(function(){jest.clearAllMocks();returnValue=(0,_debark.transform)({status:'MOCK STATUS',alpha:{},omega:[{definition:'MOCK DEFINITION',resource:'MOCK RESOURCE',response:'MOCK RESPONSE'}]});});it('invokes `toZashiki`',function(){expect(_transmission.toZashiki).toBeCalledWith('MOCK DEFINITION','MOCK RESPONSE');});it('invokes `toCheckAnswers`',function(){expect(_checkAnswers.default).toBeCalledWith('MOCK ZASHIKI','MOCK RESOURCE');});it('returns an object',function(){expect(returnValue).toEqual({status:'MOCK STATUS',definition:{},definitions:[{definition:'MOCK CHECK ANSWERS',resource:'MOCK RESOURCE',response:'MOCK RESPONSE'}],token:{}});});});});});describe('Without parameters',function(){it('invokes `transformRejected`',function(){(0,_debark.transform)({status:'MOCK REJECTED'});expect(_.transformRejected).toBeCalledWith('MOCK REJECTED',{});});});});});