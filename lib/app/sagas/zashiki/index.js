"use strict";function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}Object.defineProperty(exports,"__esModule",{value:true});exports.watchZashikiMount=watchZashikiMount;exports.watchZashikiFetch=watchZashikiFetch;exports.watchZashikiStore=watchZashikiStore;exports.watchZashikiQuery=watchZashikiQuery;exports.watchZashikiSubmit=watchZashikiSubmit;require("regenerator-runtime/runtime");var _debug=_interopRequireDefault(require("debug"));var _effects=require("redux-saga/effects");var _zashiki=require("../../actions/zashiki");var api=_interopRequireWildcard(require("../../../api/zashiki"));var _transformers=require("../../transformers");function _getRequireWildcardCache(){if(typeof WeakMap!=="function")return null;var cache=new WeakMap();_getRequireWildcardCache=function _getRequireWildcardCache(){return cache;};return cache;}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj};}var cache=_getRequireWildcardCache();if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var _marked=regeneratorRuntime.mark(mountRouteSaga),_marked2=regeneratorRuntime.mark(fetchRouteSaga),_marked3=regeneratorRuntime.mark(storeRouteSaga),_marked4=regeneratorRuntime.mark(queryRouteSaga),_marked5=regeneratorRuntime.mark(submitRouteSaga),_marked6=regeneratorRuntime.mark(watchZashikiMount),_marked7=regeneratorRuntime.mark(watchZashikiFetch),_marked8=regeneratorRuntime.mark(watchZashikiStore),_marked9=regeneratorRuntime.mark(watchZashikiQuery),_marked10=regeneratorRuntime.mark(watchZashikiSubmit);var log=(0,_debug.default)('zashiki-react-redux:app:sagas:zashiki');function mountRouteSaga(_ref){var route,_yield$call,_yield$call$data,response;return regeneratorRuntime.wrap(function mountRouteSaga$(_context){while(1){switch(_context.prev=_context.next){case 0:route=_ref.route;log('mountRouteSaga');_context.prev=2;_context.next=5;return(0,_effects.call)(api.changeRoute,route);case 5:_yield$call=_context.sent;_yield$call$data=_yield$call.data;response=_yield$call$data===void 0?{}:_yield$call$data;_context.next=10;return(0,_effects.put)((0,_zashiki.mountRouteFulfilled)(response));case 10:_context.next=16;break;case 12:_context.prev=12;_context.t0=_context["catch"](2);_context.next=16;return(0,_effects.put)((0,_zashiki.mountRouteRejected)((0,_transformers.transformError)(_context.t0)));case 16:case"end":return _context.stop();}}},_marked,null,[[2,12]]);}function fetchRouteSaga(){var _yield$call2,_yield$call2$data,response;return regeneratorRuntime.wrap(function fetchRouteSaga$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:log('fetchRouteSaga');_context2.prev=1;_context2.next=4;return(0,_effects.call)(api.fetchRoute);case 4:_yield$call2=_context2.sent;_yield$call2$data=_yield$call2.data;response=_yield$call2$data===void 0?{}:_yield$call2$data;_context2.next=9;return(0,_effects.put)((0,_zashiki.fetchRouteFulfilled)(response));case 9:_context2.next=15;break;case 11:_context2.prev=11;_context2.t0=_context2["catch"](1);_context2.next=15;return(0,_effects.put)((0,_zashiki.fetchRouteRejected)((0,_transformers.transformError)(_context2.t0)));case 15:case"end":return _context2.stop();}}},_marked2,null,[[1,11]]);}function storeRouteSaga(_ref2){var route,_yield$call3,_yield$call3$data,response;return regeneratorRuntime.wrap(function storeRouteSaga$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:route=_ref2.route;log('storeRouteSaga');_context3.prev=2;_context3.next=5;return(0,_effects.call)(api.storeRoute,route);case 5:_yield$call3=_context3.sent;_yield$call3$data=_yield$call3.data;response=_yield$call3$data===void 0?{}:_yield$call3$data;_context3.next=10;return(0,_effects.put)((0,_zashiki.storeRouteFulfilled)(response));case 10:_context3.next=16;break;case 12:_context3.prev=12;_context3.t0=_context3["catch"](2);_context3.next=16;return(0,_effects.put)((0,_zashiki.storeRouteRejected)((0,_transformers.transformError)(_context3.t0)));case 16:case"end":return _context3.stop();}}},_marked3,null,[[2,12]]);}function queryRouteSaga(){var _yield$call4,_yield$call4$data,response;return regeneratorRuntime.wrap(function queryRouteSaga$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:log('queryRouteSaga');_context4.prev=1;_context4.next=4;return(0,_effects.call)(api.queryRoute);case 4:_yield$call4=_context4.sent;_yield$call4$data=_yield$call4.data;response=_yield$call4$data===void 0?{}:_yield$call4$data;_context4.next=9;return(0,_effects.put)((0,_zashiki.queryRouteFulfilled)(response));case 9:_context4.next=15;break;case 11:_context4.prev=11;_context4.t0=_context4["catch"](1);_context4.next=15;return(0,_effects.put)((0,_zashiki.queryRouteRejected)((0,_transformers.transformError)(_context4.t0)));case 15:case"end":return _context4.stop();}}},_marked4,null,[[1,11]]);}function submitRouteSaga(_ref3){var route,_yield$call5,_yield$call5$data,response;return regeneratorRuntime.wrap(function submitRouteSaga$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:route=_ref3.route;log('submitRouteSaga');_context5.prev=2;_context5.next=5;return(0,_effects.call)(api.submitRoute,route);case 5:_yield$call5=_context5.sent;_yield$call5$data=_yield$call5.data;response=_yield$call5$data===void 0?{}:_yield$call5$data;_context5.next=10;return(0,_effects.put)((0,_zashiki.submitRouteFulfilled)(response));case 10:_context5.next=16;break;case 12:_context5.prev=12;_context5.t0=_context5["catch"](2);_context5.next=16;return(0,_effects.put)((0,_zashiki.submitRouteRejected)((0,_transformers.transformError)(_context5.t0)));case 16:case"end":return _context5.stop();}}},_marked5,null,[[2,12]]);}function watchZashikiMount(){return regeneratorRuntime.wrap(function watchZashikiMount$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return(0,_effects.takeLatest)(_zashiki.MOUNT,mountRouteSaga);case 2:case"end":return _context6.stop();}}},_marked6);}function watchZashikiFetch(){return regeneratorRuntime.wrap(function watchZashikiFetch$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return(0,_effects.takeLatest)(_zashiki.FETCH,fetchRouteSaga);case 2:case"end":return _context7.stop();}}},_marked7);}function watchZashikiStore(){return regeneratorRuntime.wrap(function watchZashikiStore$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return(0,_effects.takeLatest)(_zashiki.STORE,storeRouteSaga);case 2:case"end":return _context8.stop();}}},_marked8);}function watchZashikiQuery(){return regeneratorRuntime.wrap(function watchZashikiQuery$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return(0,_effects.takeLatest)(_zashiki.QUERY,queryRouteSaga);case 2:case"end":return _context9.stop();}}},_marked9);}function watchZashikiSubmit(){return regeneratorRuntime.wrap(function watchZashikiSubmit$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return(0,_effects.takeLatest)(_zashiki.SUBMIT,submitRouteSaga);case 2:case"end":return _context10.stop();}}},_marked10);}