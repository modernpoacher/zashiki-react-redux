"use strict";require("core-js/modules/es.object.define-property.js");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;require("core-js/modules/es.array.concat.js");var _axios=_interopRequireDefault(require("axios"));var _utils=_interopRequireDefault(require("axios/lib/utils"));var _fastDeepEqual=_interopRequireDefault(require("fast-deep-equal"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}var SETTINGS;function configure(request){var protocol=request.protocol,host=request.host,port=request.port,path=request.path,version=request.version,bearerToken=request.bearerToken,zid=request.zid;var settings={protocol:protocol,host:host,port:port,path:path,version:version,bearerToken:bearerToken,zid:zid};if(!(0,_fastDeepEqual["default"])(SETTINGS,settings)){var defaults=_axios["default"].defaults,common=_axios["default"].defaults.headers.common;common.Accept='application/json; charset=utf-8';if(bearerToken){common.Authorization="Bearer ".concat(bearerToken);}else{delete common.Authorization;}if(_utils["default"].isStandardBrowserEnv()){delete defaults.headers.Cookie;}else{defaults.headers.Cookie="zid=".concat(zid);}defaults.withCredentials=true;defaults.baseURL="".concat(protocol,"://").concat(host,":").concat(port,"/").concat(path,"/").concat(version);SETTINGS=settings;}}var _default=function _default(store){var _store$getState=store.getState(),_store$getState$zashi=_store$getState.zashiki,_store$getState$zashi2=_store$getState$zashi===void 0?{}:_store$getState$zashi,request=_store$getState$zashi2.request;if(request)configure(request);return function(next){return function(action){var _store$getState2=store.getState(),_store$getState2$zash=_store$getState2.zashiki,_store$getState2$zash2=_store$getState2$zash===void 0?{}:_store$getState2$zash,request=_store$getState2$zash2.request;if(request)configure(request);return next(action);};};};exports["default"]=_default;